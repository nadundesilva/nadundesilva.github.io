(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[165],{4544:function(e,n,t){"use strict";t.d(n,{Bf:function(){return A},bU:function(){return T},ZP:function(){return H},bO:function(){return O}});var o=t(9630),r=t(6336),i=t(9008),a=t.n(i),s=t(5675),l=t.n(s),c=t(5893),h=function(e){var n=e.children;return(0,c.jsx)(o.Z,{variant:"h3",component:"h1",sx:{pt:2,fontWeight:"bold",fontSize:35},children:n})},A=function(e){var n=e.children,t=e.metadata;return(0,c.jsxs)(r.Z,{maxWidth:!1,disableGutters:!0,children:[(0,c.jsx)(a(),{children:(0,c.jsx)("title",{children:t.title})}),(0,c.jsx)(H,{children:(0,c.jsxs)(T,{children:[(0,c.jsx)(h,{children:t.title}),(0,c.jsx)(r.Z,{sx:{position:"relative",height:500,my:2},disableGutters:!0,children:(0,c.jsx)(l(),{layout:"fill",objectFit:"cover",src:t.mainImage.src,alt:t.mainImage.alt,placeholder:"blur",blurDataURL:t.mainImage.blurDataURL})}),n]})})]})},d=t(2640),u=t(9417),p=t(9603),m=t(6236),g=t(2971),f=t(562),y=t(2763),w=t(1953),x=t(5214),b=t(3265),j=t(4548),v=t(5050),k=t(784),C=t(5084),W=t(7802),I=t(4850),Z=t(160),R=t(1664),B=t.n(R),F=t(7294),D=t(1869),q=t(9499),E={"/experience":{name:"Experience"},"/achievements":{name:"Achievements"},"/education":{name:"Education",subRoutes:{"/certifications":{name:"Certifications"}}},"/blog":{name:"Blog",subRoutes:(0,q.Z)({},"*",{name:"Post"})}},G=function(e){var n=e.children,t=e.window,i=(0,g.Z)({disableHysteresis:!0,threshold:0,target:void 0!==t?t():void 0}),a=(0,F.useRef)(null),s=F.useState(!1),l=(0,d.Z)(s,2),h=l[0],A=l[1],R=function(){return A(!h)},q=(0,D._)(),G=q.colorScheme,S=q.setColorScheme,U="dark"===G?"light":"dark",J=(0,c.jsxs)(F.Fragment,{children:[(0,c.jsx)(f.Z,{color:"inherit","aria-label":"open drawer",onClick:R,edge:"start",sx:{mr:2,display:{xs:"block",md:"none"}},children:(0,c.jsx)(m.Z,{})}),(0,c.jsx)(y.ZP,{anchor:"top",open:h,onClose:R,children:(0,c.jsx)(w.Z,{sx:{width:"auto"},onClick:R,onKeyDown:R,children:(0,c.jsx)(x.Z,{children:Object.entries(E).map((function(e){var n=(0,d.Z)(e,2),t=n[0],o=n[1];return(0,c.jsx)(B(),{href:t,passHref:!0,children:(0,c.jsx)(b.ZP,{button:!0,children:(0,c.jsx)(j.Z,{primary:o.name})})},t)}))})})})]}),Q=F.cloneElement((0,c.jsx)(v.Z,{"data-testid":"app-bar",children:(0,c.jsxs)(k.Z,{children:[J,(0,c.jsx)(o.Z,{variant:"h5",component:"h1",children:"Nadun De Silva"}),(0,c.jsx)(w.Z,{sx:{flexGrow:1}}),(0,c.jsx)(w.Z,{sx:{display:{xs:"none",md:"block"}},children:Object.entries(E).map((function(e){var n=(0,d.Z)(e,2),t=n[0],o=n[1];return(0,c.jsx)(B(),{href:t,passHref:!0,children:(0,c.jsx)(C.Z,{variant:"text",color:"primary",disableElevation:!0,sx:{color:"#ffffff",pl:2},children:o.name})},t)}))}),(0,c.jsx)(W.Z,{title:"Change to ".concat(U," theme"),children:(0,c.jsx)(f.Z,{sx:{marginLeft:5},size:"small",onClick:function(){return S(U)},children:(0,c.jsx)(p.G,{icon:"dark"===U?u.DBF:u.enB,transform:"grow-4"})})})]})}),{elevation:i?4:0});return(0,c.jsxs)(F.Fragment,{children:[Q,(0,c.jsx)(k.Z,{ref:a}),(0,c.jsx)(r.Z,{maxWidth:!1,disableGutters:!0,sx:{overflowX:"hidden"},children:n}),(0,c.jsx)(r.Z,{maxWidth:!1,sx:{textAlign:"center",paddingTop:10,paddingBottom:5,color:"#666666"},children:"\xa9 2021 Nadun De Silva"}),(0,c.jsx)(I.Z,{in:i,children:(0,c.jsx)(w.Z,{onClick:function(){var e;null===(e=a.current)||void 0===e||e.scrollIntoView({behavior:"smooth",block:"start"})},role:"presentation",sx:{position:"fixed",bottom:10,right:10},children:(0,c.jsx)(Z.Z,{color:"primary",size:"small","aria-label":"scroll back to top",children:(0,c.jsx)(p.G,{icon:u.mTx})})})})]})},S=t(4489),U=t(8346),J=t(1163),Q=function(){var e=(0,J.useRouter)().pathname.split("/").filter((function(e){return e})),n=[{name:"Home",path:e.length>0?"/":void 0}];if(e.length>0){!function e(t,o,r){if(o.length>0){var i="/"+o[0];if(i in t){var a=t[i];if(o.length>1){var s=r+i;n.push({name:a.name,path:s}),void 0!==a.subRoutes&&e(a.subRoutes,o.slice(1),s)}else n.push({name:a.name})}else if("*"in t){var l=t["*"];n.push({name:l.name})}}}(E,e,"")}return(0,c.jsx)(S.Z,{"aria-label":"breadcrumb",sx:{margin:3},separator:(0,c.jsx)(p.G,{icon:u._tD,transform:"shrink-4"}),children:n.map((function(e){return void 0===e.path?(0,c.jsx)(o.Z,{color:"textPrimary",children:e.name},e.name):(0,c.jsx)(B(),{passHref:!0,href:e.path,children:(0,c.jsx)(U.Z,{color:"inherit",children:e.name})},e.name)}))})},T=function(e){var n=e.children;return(0,c.jsxs)(r.Z,{maxWidth:!1,disableGutters:!0,sx:{marginBottom:5,px:{xs:0,lg:20,xl:40}},children:[(0,c.jsx)(Q,{}),(0,c.jsx)(r.Z,{maxWidth:!1,children:n})]})};var O=function(){var e=(0,F.useRef)(null),n=(0,F.useState)(0),t=n[0],o=n[1],r=(0,F.useState)(0),i=r[0],a=r[1],s=function(){if(null!==e.current){var n,t,r=e.current.getBoundingClientRect(),i=window.innerHeight;if(r.top>=i)n=1,t=0;else if(r.bottom<=0)n=-1,t=0;else if(r.top>i/2){var s=document.documentElement.offsetHeight,l=(window.pageYOffset+1.5*i-s)/(i/2),c=2-r.top/(i/2);n=1,t=Math.max(l,c)}else r.bottom<i/2?(n=-1,t=r.bottom/(i/2)):(n=0,t=1);o(n),a(t)}else o(0),a(0)},l=function(){window.requestAnimationFrame(s)};return(0,F.useEffect)((function(){return window.requestAnimationFrame(s),window.addEventListener("scroll",l),function(){return window.removeEventListener("scroll",l)}})),{ref:e,direction:t,offset:Math.min(Math.max(i,0),1)}},H=G},1915:function(e,n,t){"use strict";t.r(n),t.d(n,{meta:function(){return a}});var o=t(5893),r=t(1151),i=t(4544),a={title:"Production Grade Code in the Cloud Era",publishedDate:"2021-11-03",description:"Best practices for running production grade code in the cloud.",mainImage:{src:"/assets/blog/production-grade-code-in-the-cloud-era/main.jpeg",alt:"Production Grade Code in the Cloud Era - Main Image",blurDataURL:"data:image/webp;base64,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",source:{author:"Fatos Bytyqi",authorUrl:"https://medium.com/r/?url=https%3A%2F%2Funsplash.com%2F%40fatosi%3Futm_source%3Dunsplash%26utm_medium%3Dreferral%26utm_content%3DcreditCopyText",source:"Unsplash",sourceUrl:"https://medium.com/r/?url=https%3A%2F%2Funsplash.com%2Fs%2Fphotos%2Fprogramming%3Futm_source%3Dunsplash%26utm_medium%3Dreferral%26utm_content%3DcreditCopyText"}}},s=function(e){var n=e.children;return(0,o.jsx)(i.Bf,{metadata:a,children:n})};function l(e){var n=Object.assign({p:"p",h1:"h1",img:"img",ul:"ul",li:"li",em:"em",h2:"h2",hr:"hr"},(0,r.ah)(),e.components);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.p,{children:"I have always thought that writing code is more than merely writing a set of instructions for a computer to follow.\nProgramming can be graceful, meaningful and quite beautiful in the hands of a proper programmer. However, becoming a\nskilled programmer takes experience and many lessons learnt over the years (so don't be too hard on yourself)."}),"\n",(0,o.jsx)(n.p,{children:"Kubernetes, Docker and cloud technologies in general had changed the expectations of applications running in\nproduction. As developers, we would not have full access to applications in production environments due to various SRE\nand security reasons. With all these considerations, writing better code is more important than ever."}),"\n",(0,o.jsx)(n.p,{children:"In this article, I thought of sharing my thoughts based on experience in writing code as well as reviewing code, as a\ndeveloper as well as a team lead, in the industry working on multiple large scale cloud native applications. Moreover,\nthis article includes several well established practices along with my thoughts on this subject. While I may not go\ninto depth into each area, I hope this will help you get started in thinking like a pro."}),"\n",(0,o.jsx)(n.p,{children:"Without further ado, let's get started."}),"\n",(0,o.jsx)(n.h1,{children:"Handling Errors"}),"\n",(0,o.jsx)(n.p,{children:"Expected as well as unexpected errors will occur in software running in production. For example, while you may not\nencounter errors such as connection failures in development time, these are more common than you think in production.\nTherefore, handling these in graceful ways is quite important."}),"\n",(0,o.jsx)(n.img,{src:"//assets/blog/production-grade-code-in-the-cloud-era/not-found-error.jpeg",alt:"Not found error"}),"\n",(0,o.jsx)(n.p,{children:"While the exact way to handle these will change based on language and framework you are using, there are few things to\nkeep in mind when it comes to handling errors in a production environment."}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Either return (or throw based on the language you are using) or log errors properly \u2014 never ignore errors. Most\nframeworks and languages will explicitly specify errors that may occur and it\u2019s important to handle these without\nsimply ignoring them."}),"\n",(0,o.jsx)(n.li,{children:"Only return the bare minimum details (never return all the error details or any of the stack trace in exceptions /\nerrors) back to the end users as otherwise it will expose unnecessary internal information to malicious users. At this\npoint, it is important to log all the information as error logs so that the errors can be debugged if needed."}),"\n",(0,o.jsx)(n.li,{children:"It can be quite useful to add a catch-all error handler at the base of the resource / function (in some frameworks\nyou can handle this easily \u2014 for example using interceptors for HTTP resources) in your service to handle any\nunexpected and unknown errors that may occur. It is acceptable to send a generic error such as \u201cUnknown Error\u201d to the\nuser in these scenarios, if all the information required for debugging is properly logged."}),"\n"]}),"\n",(0,o.jsx)(n.h1,{children:"Graceful Shutdown"}),"\n",(0,o.jsx)(n.p,{children:"In many applications, we use resources (e.g.:- opened files, data base connections) which needs to be cleaned up or we\nmay have incoming user requests / tasks which needs to be completed. In a proper application, we need to handle these\ngracefully without abruptly stopping them when an application is shutting down."}),"\n",(0,o.jsx)(n.p,{children:"In kubernetes specially, restarts of applications can be a common occurrence. Generally, Kubernetes or any management\nsoftware which looks after your applications, will send SIGTERM OS signal (or SIGKILL when immediate shutdown is\nrequired), when it wants to force shutdown an application. These can be quite common due to many reasons such as node\nmaintenance tasks in data centers."}),"\n",(0,o.jsx)(n.p,{children:"As developers, we should handle these shutdown requests gracefully (for example in Java you can use shutdown hooks to\nhandle this) and cleanup and complete any currently running tasks so that the users are impacted less in such\nsituations."}),"\n",(0,o.jsx)(n.h1,{children:"Think like a Hacker"}),"\n",(0,o.jsx)(n.p,{children:"Security is an important aspect which cannot be stressed enough in cloud native applications. While there are many best\npractices built around security such as usage of prepared statements in databases, there is still a lot more to improve\naround security."}),"\n",(0,o.jsx)(n.p,{children:"While we can spend several articles covering the different ways security can be compromised in an application, there is\none important thing when it comes to security."}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.em,{children:"Think like a Hacker"})}),"\n",(0,o.jsx)(n.img,{src:"//assets/blog/production-grade-code-in-the-cloud-era/hacker.jpeg",alt:"Hacker"}),"\n",(0,o.jsx)(n.p,{children:"As humans, we tend to not see issues in our own work. However, training yourself to think of different ways of how you\nas a hacker can exploit your application can help you identify many security holes."}),"\n",(0,o.jsx)(n.p,{children:"Especially take care and examine the points of interactions that are exposed to the users, as it can impact the result\nand side effects of your application. For example the values provided for query parameters in an HTTP service may allow\nusers to get information of other users if a proper authorization logic is not implemented."}),"\n",(0,o.jsx)(n.p,{children:"Most importantly, think how you can change the behavior of your application using the inputs provided into your\napplication. When you put on the hat of a hacker for this, stepping outside the box of your use case and changing your\ngoal to break the system, would help you make your applications more and more secure."}),"\n",(0,o.jsx)(n.h1,{children:"Observable Applications"}),"\n",(0,o.jsx)(n.p,{children:"In many large companies, due to various security and SRE concerns, even developers themselves would not have full\naccess to their applications running in production. This can lead to many nights spent trying to figure out why your\napplication is failing in production."}),"\n",(0,o.jsx)(n.img,{src:"//assets/blog/production-grade-code-in-the-cloud-era/panic.jpeg",alt:"Panic"}),"\n",(0,o.jsxs)(n.p,{children:["This is where ",(0,o.jsx)(n.em,{children:"Observability"})," comes into the picture."]}),"\n",(0,o.jsx)(n.p,{children:"For an application to be observable, it should be possible to infer its internal state based on its outputs. There are\nthree main ways to achieve this without compromising the user experience, performance and security of an application."}),"\n",(0,o.jsx)(n.h2,{children:"Logs"}),"\n",(0,o.jsx)(n.p,{children:"Logs are an important part of any application and you should be careful in selecting a proper logging framework from\nthe start. In general all important events happening in the application should be logged (selecting the proper log\nlevel for your logs to not overwhelm log collection agents is important as well)."}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Always add as much context details as possible including IDs or any other information that would help you debug the\nerror \u2014 do not assume that you will be able to debug your code in production."}),"\n",(0,o.jsx)(n.li,{children:"Use a request / task ID \u2014 since many applications need to handle concurrent requests, it can be hard to distinguish\nlogs printed from one request from another without an ID to correlate logs together. A random UUID generated for\neach of these concurrent requests / tasks would be the solution for this issue."}),"\n",(0,o.jsx)(n.li,{children:"Use log levels wisely \u2014 it can be quite costly (in terms of money as well as performance) to write logs in\nproduction environments. Moreover, properly marking warning and error logs can help SRE to identify issues easily."}),"\n",(0,o.jsx)(n.li,{children:"Use debug logs with information required for debugging \u2014 Since it\u2019s general practice to only enable info log level\nin production, you can log all the actions in your application as debug logs so that they can be enabled when there\nis a production issue."}),"\n",(0,o.jsx)(n.li,{children:"Do not add Personal Identifiable Information (PII), tokens or any other sensitive information into logs."}),"\n"]}),"\n",(0,o.jsx)(n.h2,{children:"Distributed Tracing"}),"\n",(0,o.jsx)(n.p,{children:"Micro-services had been gaining a lot of traction over the years and even if you are not a fan of it, chances are that,\nin most cases, you have at least few separate applications interacting with each other to full-fill an overall goal."}),"\n",(0,o.jsx)(n.p,{children:"Tracing is an additional layer of observability which is capable tracking your application across multiple services.\nTherefore, it would be worthwhile to implement tracing if you are working on a large scale distributed application."}),"\n",(0,o.jsx)(n.p,{children:"While I am not planning on explaining distributed tracing in detail in this article, there are few things to note after\nyou get to know about distributed tracing."}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Add the current trace ID and span ID to the logs so that the trace spans can be correlated with the logs."}),"\n",(0,o.jsx)(n.li,{children:"Use samplers \u2014 tracing all requests in your application can have a performance impact. Therefore it is important to\npick a sensible sampling rate for your application (I would recommend using a rate-limiting sampler which samples a\nconstant number of traces within a unit time)."}),"\n",(0,o.jsx)(n.li,{children:"Implement proper propagation of trace context over incoming and outgoing requests for tracing across multiple\nservices."}),"\n",(0,o.jsx)(n.li,{children:"Do not trust the trace context that can be passed on by users \u2014 a malicious user can sample all requests by sending\na tampered trace context into your application."}),"\n"]}),"\n",(0,o.jsx)(n.h2,{children:"Metrics"}),"\n",(0,o.jsx)(n.p,{children:"While metrics may not seem important at a first glance, it can be quite handy as it will help in implementing an\noverall dashboard of all applications when dealing with a large scale deployment."}),"\n",(0,o.jsx)(n.img,{src:"//assets/blog/production-grade-code-in-the-cloud-era/metrics-dashboard.jpeg",alt:"Metrics dashboard"}),"\n",(0,o.jsx)(n.p,{children:"A set of metrics covering things such as the errors that occurred in the application, total traffic, latency in\nhandling requests / tasks (or any other information that is important to you) can help you spot issues in advance."}),"\n",(0,o.jsx)(n.p,{children:"For all the above (logs, distributed tracing and metrics), Open Telemetry had been gaining traction over the last few\nyears, as a widely accepted specification. This was introduced by CNCF and it is being implemented by most of the\npopular frameworks such as Jaeger and Prometheus. Therefore, this can be a good starting point if you are not sure\nwhere to start at."}),"\n",(0,o.jsx)(n.h2,{children:"Health Probes"}),"\n",(0,o.jsx)(n.p,{children:"In kubernetes (as well as many other cloud deployment solutions), health probes are an important aspect which should\nbe implemented properly. In many cases, these probes will be used in different ways (e.g.:- for sending alerts for SRE\nteams, generating availability dashboards for users, automatically restarting services if they are unhealthy, etc.)."}),"\n",(0,o.jsx)(n.p,{children:"Therefore, for your applications to function properly, it is important to implement the health probes properly. While\nthe best practices may vary from one framework / use case to another, the important aspect to remember is to capture\nproperly what constitutes as healthy for your application in the health probe endpoints."}),"\n",(0,o.jsx)(n.h1,{children:"Clean & Readable Code"}),"\n",(0,o.jsx)(n.img,{src:"//assets/blog/production-grade-code-in-the-cloud-era/code.jpeg",alt:"Code"}),"\n",(0,o.jsx)(n.p,{children:"The importance of clean and readable code had been highlighted by many people over the years. If you have ever had to\nfix a bug in a code someone wrote many years ago, you would know the importance of this."}),"\n",(0,o.jsx)(n.p,{children:"There are simple steps that you can take to ensure your code is readable by any poor soul who will need to fix a bug in\nthe future."}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Make your variables as self-explanatory as possible \u2014 most compilers & transpilers today optimizes and minimizes\nyour code. Therefore extra few characters in your variable names would not harm anyone."}),"\n",(0,o.jsx)(n.li,{children:"Use nouns for variables and verbs for methods and see how your code itself becomes a story telling how it works."}),"\n",(0,o.jsx)(n.li,{children:"Do not misuse comments \u2014 your code should be all the explanation it needs. Try to think of exactly what you are\ndoing and make the code meaningful (this will help you reduce the number of bugs in your code as well)."}),"\n",(0,o.jsx)(n.li,{children:"Use comments only when you write a complex algorithm which can benefit from a brief explanation."}),"\n",(0,o.jsx)(n.li,{children:"Setup static code checks and code style checks built into your CI/CD flows from the start \u2014 no project is too small\nto not configure tools as an extra layer of validation."}),"\n"]}),"\n",(0,o.jsx)(n.p,{children:"Most importantly, keep in mind that someone else would need to read your code and understand in the near future."}),"\n",(0,o.jsx)(n.h1,{children:"Think of the Bigger Picture"}),"\n",(0,o.jsx)(n.p,{children:"Last, but not least, always think about the bigger picture of what you are working on. While some projects can get too\ncomplex to know the full breadth of it, it would always help to know as much as possible so that you can write better\ncode catering to different possibilities."}),"\n",(0,o.jsx)(n.p,{children:"Thinking from different angles and pondering on the what-ifs of your application can give you the extra boost that you\nneed to become a great developer among many good developers."}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.p,{children:"Finally, while all these are very sensible things to follow, always think and rely on your judgement. Every program you\nwrite is unique and there can be exceptions always."}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.p,{children:"Hope my two cents on writing production grade code helped you become a better developer. Please feel free to reach out\nto me if you need any clarifications."})]})}n.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,o.jsx)(s,Object.assign({},e,{children:(0,o.jsx)(l,e)}))}},2918:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/blog/posts/production-grade-code-in-the-cloud-era",function(){return t(1915)}])}},function(e){e.O(0,[976,671,774,888,179],(function(){return n=2918,e(e.s=n);var n}));var n=e.O();_N_E=n}]);
//# sourceMappingURL=production-grade-code-in-the-cloud-era-52938592729e1b9f.js.map