2:I[2069,["629","static/chunks/629-785670e42191d981.js","9576","static/chunks/9576-4c3500db0ab14a79.js","4013","static/chunks/4013-243734088ce298b9.js","3003","static/chunks/3003-0a2a671a1ce21476.js","9239","static/chunks/9239-2c4acc6af55db297.js","8089","static/chunks/8089-31963b1c2fafadaa.js","7468","static/chunks/app/(content)/blog-articles/(articles)/kubernetes-the-right-way/securing-your-production-cluster-with-network-policies/page-69336679b611f37a.js"],"default"]
3:I[46387,["629","static/chunks/629-785670e42191d981.js","9576","static/chunks/9576-4c3500db0ab14a79.js","4013","static/chunks/4013-243734088ce298b9.js","3003","static/chunks/3003-0a2a671a1ce21476.js","9239","static/chunks/9239-2c4acc6af55db297.js","8089","static/chunks/8089-31963b1c2fafadaa.js","7468","static/chunks/app/(content)/blog-articles/(articles)/kubernetes-the-right-way/securing-your-production-cluster-with-network-policies/page-69336679b611f37a.js"],"default"]
4:I[16200,["629","static/chunks/629-785670e42191d981.js","9576","static/chunks/9576-4c3500db0ab14a79.js","4013","static/chunks/4013-243734088ce298b9.js","3003","static/chunks/3003-0a2a671a1ce21476.js","9239","static/chunks/9239-2c4acc6af55db297.js","8089","static/chunks/8089-31963b1c2fafadaa.js","7468","static/chunks/app/(content)/blog-articles/(articles)/kubernetes-the-right-way/securing-your-production-cluster-with-network-policies/page-69336679b611f37a.js"],"default"]
5:I[94013,["629","static/chunks/629-785670e42191d981.js","9576","static/chunks/9576-4c3500db0ab14a79.js","4013","static/chunks/4013-243734088ce298b9.js","3003","static/chunks/3003-0a2a671a1ce21476.js","9239","static/chunks/9239-2c4acc6af55db297.js","8089","static/chunks/8089-31963b1c2fafadaa.js","7468","static/chunks/app/(content)/blog-articles/(articles)/kubernetes-the-right-way/securing-your-production-cluster-with-network-policies/page-69336679b611f37a.js"],"default"]
6:I[88506,["629","static/chunks/629-785670e42191d981.js","9576","static/chunks/9576-4c3500db0ab14a79.js","4013","static/chunks/4013-243734088ce298b9.js","3003","static/chunks/3003-0a2a671a1ce21476.js","9239","static/chunks/9239-2c4acc6af55db297.js","8089","static/chunks/8089-31963b1c2fafadaa.js","7468","static/chunks/app/(content)/blog-articles/(articles)/kubernetes-the-right-way/securing-your-production-cluster-with-network-policies/page-69336679b611f37a.js"],"default"]
7:I[97494,["629","static/chunks/629-785670e42191d981.js","9576","static/chunks/9576-4c3500db0ab14a79.js","4013","static/chunks/4013-243734088ce298b9.js","3003","static/chunks/3003-0a2a671a1ce21476.js","9239","static/chunks/9239-2c4acc6af55db297.js","8089","static/chunks/8089-31963b1c2fafadaa.js","7468","static/chunks/app/(content)/blog-articles/(articles)/kubernetes-the-right-way/securing-your-production-cluster-with-network-policies/page-69336679b611f37a.js"],"default"]
8:I[29239,["629","static/chunks/629-785670e42191d981.js","9576","static/chunks/9576-4c3500db0ab14a79.js","4013","static/chunks/4013-243734088ce298b9.js","3003","static/chunks/3003-0a2a671a1ce21476.js","9239","static/chunks/9239-2c4acc6af55db297.js","8089","static/chunks/8089-31963b1c2fafadaa.js","7468","static/chunks/app/(content)/blog-articles/(articles)/kubernetes-the-right-way/securing-your-production-cluster-with-network-policies/page-69336679b611f37a.js"],"default"]
9:I[65878,["629","static/chunks/629-785670e42191d981.js","9576","static/chunks/9576-4c3500db0ab14a79.js","4013","static/chunks/4013-243734088ce298b9.js","3003","static/chunks/3003-0a2a671a1ce21476.js","9239","static/chunks/9239-2c4acc6af55db297.js","8089","static/chunks/8089-31963b1c2fafadaa.js","7468","static/chunks/app/(content)/blog-articles/(articles)/kubernetes-the-right-way/securing-your-production-cluster-with-network-policies/page-69336679b611f37a.js"],"Image"]
a:I[57026,["629","static/chunks/629-785670e42191d981.js","9576","static/chunks/9576-4c3500db0ab14a79.js","4013","static/chunks/4013-243734088ce298b9.js","3003","static/chunks/3003-0a2a671a1ce21476.js","9239","static/chunks/9239-2c4acc6af55db297.js","8089","static/chunks/8089-31963b1c2fafadaa.js","7468","static/chunks/app/(content)/blog-articles/(articles)/kubernetes-the-right-way/securing-your-production-cluster-with-network-policies/page-69336679b611f37a.js"],"default"]
b:I[57026,["629","static/chunks/629-785670e42191d981.js","9576","static/chunks/9576-4c3500db0ab14a79.js","4013","static/chunks/4013-243734088ce298b9.js","3003","static/chunks/3003-0a2a671a1ce21476.js","9239","static/chunks/9239-2c4acc6af55db297.js","8089","static/chunks/8089-31963b1c2fafadaa.js","7468","static/chunks/app/(content)/blog-articles/(articles)/kubernetes-the-right-way/securing-your-production-cluster-with-network-policies/page-69336679b611f37a.js"],"CustomListItem"]
c:I[4707,[],""]
d:I[36423,[],""]
e:I[19978,["629","static/chunks/629-785670e42191d981.js","9576","static/chunks/9576-4c3500db0ab14a79.js","4013","static/chunks/4013-243734088ce298b9.js","3003","static/chunks/3003-0a2a671a1ce21476.js","5659","static/chunks/5659-9cbcaafeb9c16865.js","7725","static/chunks/7725-47f7eba030db1b81.js","5003","static/chunks/5003-d4842d2d614115b4.js","8948","static/chunks/app/(content)/layout-ff7515e3ab3cb47c.js"],"default"]
f:I[64099,["629","static/chunks/629-785670e42191d981.js","9576","static/chunks/9576-4c3500db0ab14a79.js","4013","static/chunks/4013-243734088ce298b9.js","3003","static/chunks/3003-0a2a671a1ce21476.js","5659","static/chunks/5659-9cbcaafeb9c16865.js","7725","static/chunks/7725-47f7eba030db1b81.js","5003","static/chunks/5003-d4842d2d614115b4.js","8948","static/chunks/app/(content)/layout-ff7515e3ab3cb47c.js"],"default"]
10:I[88003,["629","static/chunks/629-785670e42191d981.js","9576","static/chunks/9576-4c3500db0ab14a79.js","4013","static/chunks/4013-243734088ce298b9.js","3003","static/chunks/3003-0a2a671a1ce21476.js","5659","static/chunks/5659-9cbcaafeb9c16865.js","4661","static/chunks/4661-139e333ea1ea96a3.js","5003","static/chunks/5003-d4842d2d614115b4.js","3185","static/chunks/app/layout-046256ea63bb7a25.js"],""]
11:"$Sreact.strict_mode"
12:I[43180,["629","static/chunks/629-785670e42191d981.js","9576","static/chunks/9576-4c3500db0ab14a79.js","4013","static/chunks/4013-243734088ce298b9.js","3003","static/chunks/3003-0a2a671a1ce21476.js","5659","static/chunks/5659-9cbcaafeb9c16865.js","4661","static/chunks/4661-139e333ea1ea96a3.js","5003","static/chunks/5003-d4842d2d614115b4.js","3185","static/chunks/app/layout-046256ea63bb7a25.js"],"default"]
13:I[3294,["629","static/chunks/629-785670e42191d981.js","9576","static/chunks/9576-4c3500db0ab14a79.js","4013","static/chunks/4013-243734088ce298b9.js","3003","static/chunks/3003-0a2a671a1ce21476.js","5659","static/chunks/5659-9cbcaafeb9c16865.js","4661","static/chunks/4661-139e333ea1ea96a3.js","5003","static/chunks/5003-d4842d2d614115b4.js","3185","static/chunks/app/layout-046256ea63bb7a25.js"],"default"]
14:I[26319,["629","static/chunks/629-785670e42191d981.js","9576","static/chunks/9576-4c3500db0ab14a79.js","4013","static/chunks/4013-243734088ce298b9.js","3003","static/chunks/3003-0a2a671a1ce21476.js","5659","static/chunks/5659-9cbcaafeb9c16865.js","7725","static/chunks/7725-47f7eba030db1b81.js","5003","static/chunks/5003-d4842d2d614115b4.js","8948","static/chunks/app/(content)/layout-ff7515e3ab3cb47c.js"],"default"]
15:I[13490,["4013","static/chunks/4013-243734088ce298b9.js","3003","static/chunks/3003-0a2a671a1ce21476.js","7601","static/chunks/app/error-e24ab637832bc174.js"],"default"]
1a:I[35389,["3003","static/chunks/3003-0a2a671a1ce21476.js","8555","static/chunks/app/loading-14c7d0df30b9dfef.js"],"default"]
16:{"fontFamily":"system-ui,\"Segoe UI\",Roboto,Helvetica,Arial,sans-serif,\"Apple Color Emoji\",\"Segoe UI Emoji\"","height":"100vh","textAlign":"center","display":"flex","flexDirection":"column","alignItems":"center","justifyContent":"center"}
17:{"display":"inline-block","margin":"0 20px 0 0","padding":"0 23px 0 0","fontSize":24,"fontWeight":500,"verticalAlign":"top","lineHeight":"49px"}
18:{"display":"inline-block"}
19:{"fontSize":14,"fontWeight":400,"lineHeight":"49px","margin":0}
0:["4D-0cPGOcr3BdQXXtOIJu",[[["",{"children":["(content)",{"children":["blog-articles",{"children":["(articles)",{"children":["kubernetes-the-right-way",{"children":["securing-your-production-cluster-with-network-policies",{"children":["__PAGE__",{}]}]}]}]}]}]},"$undefined","$undefined",true],["",{"children":["(content)",{"children":["blog-articles",{"children":["(articles)",{"children":["kubernetes-the-right-way",{"children":["securing-your-production-cluster-with-network-policies",{"children":["__PAGE__",{},[["$L1",["$","$L2",null,{"children":[["$","$L3",null,{"variant":"h2","sx":{"mb":5},"children":"Kubernetes the Right Way: Securing Your Production Cluster with Network Policies"}],["$","$L3",null,{"variant":"body2","sx":{"mb":2,"color":"#888888"},"children":["Published on"," ","Jun 22, 2023"]}],["$","$L3",null,{"variant":"body2","sx":{"mb":2,"color":"#555555"},"children":"Kubernetes Network Policies is an important tool at your disposal for improving the Security of your Kubernetes Cluster."}],["$","$L2",null,{"sx":{"mb":5},"children":["$","$L4",null,{"href":"https://faun.pub/3-steps-to-securing-your-kubernetes-cluster-with-network-policies-99155bf4df96","target":"_blank","children":["$","$L5",null,{"size":"small","variant":"outlined","endIcon":["$","$L6",null,{}],"children":"Medium"}]}]}],[["$","$L3",null,{"variant":"body1","gutterBottom":true,"sx":{"m":0,"pt":2,"textAlign":"justify"},"children":"Security is an important aspect of any production deployment. One of the most important aspects of preventing as well as mitigating the impact of a security breach is controlling the network traffic of your environment."}],"\n",["$","$L3",null,{"variant":"body1","gutterBottom":true,"sx":{"m":0,"pt":2,"textAlign":"justify"},"children":"Properly adding rules to control network access helps reduce the attack surface. On top of that, if some parts of your deployment become compromised by a malicious attacker, and if the proper Network rules are in place, it can help in limiting the impact radius. All of this makes improving Security using Network Policies quite important for your production Kubernetes Cluster."}],"\n",["$","$L3",null,{"variant":"body1","gutterBottom":true,"sx":{"m":0,"pt":2,"textAlign":"justify"},"children":["$","em",null,{"children":"So without further ado, let’s get started!"}]}],"\n",["$","$L7",null,{"sx":{"border":0,"textAlign":"center","pt":"2em","&::before":{"content":"'\\2022\\2800\\2022\\2800\\2022'","fontSize":"2rem","color":"#666"}}}],"\n",["$","$L2",null,{"sx":{"pt":8,"pb":3},"children":["$","$L3",null,{"variant":"h3","children":"What are K8s Network Policies?"}]}],"\n",["$","$L3",null,{"variant":"body1","gutterBottom":true,"sx":{"m":0,"pt":2,"textAlign":"justify"},"children":["$","em",null,{"children":"Note: If you already know what a Kubernetes Network Policy is and how it works, you can skip this section. This is only a short introduction to Network Policies."}]}],"\n",["$","$L8",null,{"container":true,"direction":"column","justifyContent":"center","alignItems":"center","py":3,"children":[["$","$L8",null,{"sx":{"textAlign":"center"},"children":["$","$L9",null,{"src":{"src":"/_next/static/media/do-not-enter.d176a482.webp","height":3200,"width":4800,"blurDataURL":"data:image/webp;base64,UklGRkgAAABXRUJQVlA4IDwAAADwAQCdASoIAAUAAkA4JZwCsAEfbknB9QAA/m0J6y3OceJtwTZd3k4JHaneqbEFbUx+1yOIZcEGDkTYQAA=","blurWidth":8,"blurHeight":5},"alt":"Do not Enter","unoptimized":true,"sizes":"100vw","style":{"width":"75%","height":"auto"}}]}],["$","$L8",null,{"children":["$","$L3",null,{"sx":{"fontSize":"0.8em"},"children":["Photo by Clint"," ",["$","$L4",null,{"href":"https://www.pexels.com/@kevin-b-222950695/","target":"_blank","children":"Kevin Burnell"}]," ","on"," ",["$","$L4",null,{"href":"https://www.pexels.com/photo/road-in-the-country-with-no-entry-sign-15633723/","target":"_blank","children":"Pexels"}]]}]}]]}],"\n",["$","$L3",null,{"variant":"body1","gutterBottom":true,"sx":{"m":0,"pt":2,"textAlign":"justify"},"children":"Kubernetes Network Policies allow us to define a set of rules which specifies what network traffic is allowed to and from a Kubernetes Pod. The default behavior of Kubernetes is that it allows and facilitates the communication between all Pods within the Cluster (if no Network Policies are applied to the Pods). However, once a Network Policy is applied to a Pod, all traffic coming in and out of the Pod is blocked except for the traffic defined in the Network Policy."}],"\n",["$","$L3",null,{"variant":"body1","gutterBottom":true,"sx":{"m":0,"pt":2,"textAlign":"justify"},"children":["In a Network Policy, the ",["$","span",null,{"data-rehype-pretty-code-figure":"","children":["$","code",null,{"data-language":"plaintext","data-theme":"dracula","style":{"backgroundColor":"#282A36","color":"#F8F8F2"},"children":["$","span",null,{"data-line":"","children":["$","span",null,{"children":"podSelector"}]}]}]}]," field needs to be specified pointing to the pods to which the Network Policy should apply. The ",["$","span",null,{"data-rehype-pretty-code-figure":"","children":["$","code",null,{"data-language":"plaintext","data-theme":"dracula","style":{"backgroundColor":"#282A36","color":"#F8F8F2"},"children":["$","span",null,{"data-line":"","children":["$","span",null,{"children":"policyTypes"}]}]}]}],", ",["$","span",null,{"data-rehype-pretty-code-figure":"","children":["$","code",null,{"data-language":"plaintext","data-theme":"dracula","style":{"backgroundColor":"#282A36","color":"#F8F8F2"},"children":["$","span",null,{"data-line":"","children":["$","span",null,{"children":"egress"}]}]}]}]," and ",["$","span",null,{"data-rehype-pretty-code-figure":"","children":["$","code",null,{"data-language":"plaintext","data-theme":"dracula","style":{"backgroundColor":"#282A36","color":"#F8F8F2"},"children":["$","span",null,{"data-line":"","children":["$","span",null,{"children":"ingress"}]}]}]}]," fields allow us to define the exact rules that are applied to the Pod."]}],"\n",["$","$L3",null,{"variant":"body1","gutterBottom":true,"sx":{"m":0,"pt":2,"textAlign":"justify"},"children":"One pod can have multiple Network Policies that are applied to it based on the selectors being used. Whenever Kubernetes allows or denies a request (or even a single packet of data) to or from a Pod, it will look at the Network Policies applied to the Pod. If at least one Network Policy is applied to it and if at least one of them allows the request, it will be allowed. Otherwise, it will be denied."}],"\n",["$","$L7",null,{"sx":{"border":0,"textAlign":"center","pt":"2em","&::before":{"content":"'\\2022\\2800\\2022\\2800\\2022'","fontSize":"2rem","color":"#666"}}}],"\n",["$","$L2",null,{"sx":{"pt":8,"pb":3},"children":["$","$L3",null,{"variant":"h3","children":"Leveraging Network Policies"}]}],"\n",["$","$L2",null,{"sx":{"pt":8,"pb":3},"children":["$","$L3",null,{"variant":"h4","children":"Deny All Traffic"}]}],"\n",["$","$L3",null,{"variant":"body1","gutterBottom":true,"sx":{"m":0,"pt":2,"textAlign":"justify"},"children":["One of the important things that you should do in your Kubernetes cluster is having a deny-all policy selecting all Pods (with an empty Pod selector; ",") that will block all ingress and egress traffic. This prevents all communication within the Namespaces. Even if your application needs access to the internet (even to arbitrary IP addresses), this Policy still should be added for both incoming and outgoing traffic."]}],"\n",["$","figure",null,{"data-rehype-pretty-code-figure":"","children":["$","pre",null,{"style":{"backgroundColor":"#282A36","color":"#F8F8F2"},"tabIndex":"0","data-language":"yaml","data-theme":"dracula","children":["$","code",null,{"data-language":"yaml","data-theme":"dracula","style":{"display":"grid"},"children":[["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#8BE9FD"},"children":"apiVersion"}],["$","span",null,{"style":{"color":"#FF79C6"},"children":":"}],["$","span",null,{"style":{"color":"#F1FA8C"},"children":" networking.k8s.io/v1"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#8BE9FD"},"children":"kind"}],["$","span",null,{"style":{"color":"#FF79C6"},"children":":"}],["$","span",null,{"style":{"color":"#F1FA8C"},"children":" NetworkPolicy"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#8BE9FD"},"children":"metadata"}],["$","span",null,{"style":{"color":"#FF79C6"},"children":":"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#8BE9FD"},"children":"    name"}],["$","span",null,{"style":{"color":"#FF79C6"},"children":":"}],["$","span",null,{"style":{"color":"#F1FA8C"},"children":" default-deny-all"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#8BE9FD"},"children":"spec"}],["$","span",null,{"style":{"color":"#FF79C6"},"children":":"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#8BE9FD"},"children":"    podSelector"}],["$","span",null,{"style":{"color":"#FF79C6"},"children":":"}],["$","span",null,{"style":{"color":"#F8F8F2"},"children":" {}"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#8BE9FD"},"children":"    policyTypes"}],["$","span",null,{"style":{"color":"#FF79C6"},"children":":"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FF79C6"},"children":"        -"}],["$","span",null,{"style":{"color":"#F1FA8C"},"children":" Ingress"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FF79C6"},"children":"        -"}],["$","span",null,{"style":{"color":"#F1FA8C"},"children":" Egress"}]]}]]}]}]}],"\n",["$","$L3",null,{"variant":"body1","gutterBottom":true,"sx":{"m":0,"pt":2,"textAlign":"justify"},"children":["$","em",null,{"children":"Wait! But then how would my actual application traffic get through?"}]}],"\n",["$","$L3",null,{"variant":"body1","gutterBottom":true,"sx":{"m":0,"pt":2,"textAlign":"justify"},"children":"For your applications, you can add separate Network Policies as needed to allow access. This changes the default behavior of Kubernetes Networking and implements a whitelisting-based approach to allowing network access."}],"\n",["$","$L3",null,{"variant":"body1","gutterBottom":true,"sx":{"m":0,"pt":2,"textAlign":"justify"},"children":"This is important if a malicious user somehow manages to deploy a Pod into the namespace (e.g.:- By exploiting a security loophole in a Pod with the ability to do so), that Pod will be limited and won’t be able to do any network calls."}],"\n",["$","$L2",null,{"sx":{"pt":8,"pb":3},"children":["$","$L3",null,{"variant":"h4","children":"Allow Traffic to and from Pods at a Granular Level"}]}],"\n",["$","$L3",null,{"variant":"body1","gutterBottom":true,"sx":{"m":0,"pt":2,"textAlign":"justify"},"children":"When we get to actually allowing the application traffic from one Pod to another, you will need to create Network Policies for each different set of Pods."}],"\n",["$","$L3",null,{"variant":"body1","gutterBottom":true,"sx":{"m":0,"pt":2,"textAlign":"justify"},"children":"While it may be tempting to create one Network Policy covering all your application Pods, it should be avoided. At the same time, creating a Network Policy for each deployment could be quite tiring if you have a large cluster. It is important to strike a balance between these two extremes and group your Pods properly using labels. You can then create Network Policies, selecting these pod labels as well as namespace labels to allow your application traffic."}],"\n",["$","$L3",null,{"variant":"body1","gutterBottom":true,"sx":{"m":0,"pt":2,"textAlign":"justify"},"children":["It would be even better to specify ports and protocols in the allowed traffic. You can even specify a port range using ",["$","span",null,{"data-rehype-pretty-code-figure":"","children":["$","code",null,{"data-language":"plaintext","data-theme":"dracula","style":{"backgroundColor":"#282A36","color":"#F8F8F2"},"children":["$","span",null,{"data-line":"","children":["$","span",null,{"children":"port"}]}]}]}]," and ",["$","span",null,{"data-rehype-pretty-code-figure":"","children":["$","code",null,{"data-language":"plaintext","data-theme":"dracula","style":{"backgroundColor":"#282A36","color":"#F8F8F2"},"children":["$","span",null,{"data-line":"","children":["$","span",null,{"children":"endPort"}]}]}]}]," fields. This helps in reducing the attack surface even further."]}],"\n",["$","$L3",null,{"variant":"body1","gutterBottom":true,"sx":{"m":0,"pt":2,"textAlign":"justify"},"children":"Let’s take a look at the example below of a Network Policy applied to a frontend server with server-side rendering. The frontend needs to accept incoming traffic from Nginx Ingress Controller and also it needs to call the backend for fetching data and the IdP (Identity Provider) for authentication and authorization."}],"\n",["$","figure",null,{"data-rehype-pretty-code-figure":"","children":["$","pre",null,{"style":{"backgroundColor":"#282A36","color":"#F8F8F2"},"tabIndex":"0","data-language":"yaml","data-theme":"dracula","children":["$","code",null,{"data-language":"yaml","data-theme":"dracula","style":{"display":"grid"},"children":[["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#8BE9FD"},"children":"apiVersion"}],["$","span",null,{"style":{"color":"#FF79C6"},"children":":"}],["$","span",null,{"style":{"color":"#F1FA8C"},"children":" networking.k8s.io/v1"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#8BE9FD"},"children":"kind"}],["$","span",null,{"style":{"color":"#FF79C6"},"children":":"}],["$","span",null,{"style":{"color":"#F1FA8C"},"children":" NetworkPolicy"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#8BE9FD"},"children":"metadata"}],["$","span",null,{"style":{"color":"#FF79C6"},"children":":"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#8BE9FD"},"children":"    name"}],["$","span",null,{"style":{"color":"#FF79C6"},"children":":"}],["$","span",null,{"style":{"color":"#F1FA8C"},"children":" allow-frontend"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#8BE9FD"},"children":"spec"}],["$","span",null,{"style":{"color":"#FF79C6"},"children":":"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#8BE9FD"},"children":"    podSelector"}],["$","span",null,{"style":{"color":"#FF79C6"},"children":":"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#8BE9FD"},"children":"        matchLabels"}],["$","span",null,{"style":{"color":"#FF79C6"},"children":":"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#8BE9FD"},"children":"            app"}],["$","span",null,{"style":{"color":"#FF79C6"},"children":":"}],["$","span",null,{"style":{"color":"#F1FA8C"},"children":" myapp"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#8BE9FD"},"children":"            component"}],["$","span",null,{"style":{"color":"#FF79C6"},"children":":"}],["$","span",null,{"style":{"color":"#F1FA8C"},"children":" frontend"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#8BE9FD"},"children":"    policyTypes"}],["$","span",null,{"style":{"color":"#FF79C6"},"children":":"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FF79C6"},"children":"        -"}],["$","span",null,{"style":{"color":"#F1FA8C"},"children":" Ingress"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FF79C6"},"children":"        -"}],["$","span",null,{"style":{"color":"#F1FA8C"},"children":" Egress"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#8BE9FD"},"children":"    ingress"}],["$","span",null,{"style":{"color":"#FF79C6"},"children":":"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FF79C6"},"children":"        -"}],["$","span",null,{"style":{"color":"#8BE9FD"},"children":" from"}],["$","span",null,{"style":{"color":"#FF79C6"},"children":":"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FF79C6"},"children":"              -"}],["$","span",null,{"style":{"color":"#8BE9FD"},"children":" namespaceSelector"}],["$","span",null,{"style":{"color":"#FF79C6"},"children":":"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#8BE9FD"},"children":"                    matchLabels"}],["$","span",null,{"style":{"color":"#FF79C6"},"children":":"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#8BE9FD"},"children":"                        kubernetes.io/metadata.name"}],["$","span",null,{"style":{"color":"#FF79C6"},"children":":"}],["$","span",null,{"style":{"color":"#F1FA8C"},"children":" ingress-nginx"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#8BE9FD"},"children":"                podSelector"}],["$","span",null,{"style":{"color":"#FF79C6"},"children":":"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#8BE9FD"},"children":"                    matchLabels"}],["$","span",null,{"style":{"color":"#FF79C6"},"children":":"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#8BE9FD"},"children":"                        app"}],["$","span",null,{"style":{"color":"#FF79C6"},"children":":"}],["$","span",null,{"style":{"color":"#F1FA8C"},"children":" controller"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#8BE9FD"},"children":"    egress"}],["$","span",null,{"style":{"color":"#FF79C6"},"children":":"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FF79C6"},"children":"        -"}],["$","span",null,{"style":{"color":"#8BE9FD"},"children":" to"}],["$","span",null,{"style":{"color":"#FF79C6"},"children":":"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FF79C6"},"children":"              -"}],["$","span",null,{"style":{"color":"#8BE9FD"},"children":" namespaceSelector"}],["$","span",null,{"style":{"color":"#FF79C6"},"children":":"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#8BE9FD"},"children":"                    matchLabels"}],["$","span",null,{"style":{"color":"#FF79C6"},"children":":"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#8BE9FD"},"children":"                        app"}],["$","span",null,{"style":{"color":"#FF79C6"},"children":":"}],["$","span",null,{"style":{"color":"#F1FA8C"},"children":" myapp"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#8BE9FD"},"children":"                        component"}],["$","span",null,{"style":{"color":"#FF79C6"},"children":":"}],["$","span",null,{"style":{"color":"#F1FA8C"},"children":" backend"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#8BE9FD"},"children":"          ports"}],["$","span",null,{"style":{"color":"#FF79C6"},"children":":"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FF79C6"},"children":"              -"}],["$","span",null,{"style":{"color":"#8BE9FD"},"children":" protocol"}],["$","span",null,{"style":{"color":"#FF79C6"},"children":":"}],["$","span",null,{"style":{"color":"#F1FA8C"},"children":" TCP"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#8BE9FD"},"children":"                port"}],["$","span",null,{"style":{"color":"#FF79C6"},"children":":"}],["$","span",null,{"style":{"color":"#BD93F9"},"children":" 8080"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FF79C6"},"children":"        -"}],["$","span",null,{"style":{"color":"#8BE9FD"},"children":" to"}],["$","span",null,{"style":{"color":"#FF79C6"},"children":":"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FF79C6"},"children":"              -"}],["$","span",null,{"style":{"color":"#8BE9FD"},"children":" namespaceSelector"}],["$","span",null,{"style":{"color":"#FF79C6"},"children":":"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#8BE9FD"},"children":"                    matchLabels"}],["$","span",null,{"style":{"color":"#FF79C6"},"children":":"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#8BE9FD"},"children":"                        app"}],["$","span",null,{"style":{"color":"#FF79C6"},"children":":"}],["$","span",null,{"style":{"color":"#F1FA8C"},"children":" myapp"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#8BE9FD"},"children":"                        component"}],["$","span",null,{"style":{"color":"#FF79C6"},"children":":"}],["$","span",null,{"style":{"color":"#F1FA8C"},"children":" idp"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#8BE9FD"},"children":"          ports"}],["$","span",null,{"style":{"color":"#FF79C6"},"children":":"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FF79C6"},"children":"              -"}],["$","span",null,{"style":{"color":"#8BE9FD"},"children":" protocol"}],["$","span",null,{"style":{"color":"#FF79C6"},"children":":"}],["$","span",null,{"style":{"color":"#F1FA8C"},"children":" TCP"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#8BE9FD"},"children":"                port"}],["$","span",null,{"style":{"color":"#FF79C6"},"children":":"}],["$","span",null,{"style":{"color":"#BD93F9"},"children":" 9090"}]]}]]}]}]}],"\n",["$","$L3",null,{"variant":"body1","gutterBottom":true,"sx":{"m":0,"pt":2,"textAlign":"justify"},"children":["You can use any combination of Network Policies according to what suits your application. Within a Network Policy, you can use any combination of ",["$","span",null,{"data-rehype-pretty-code-figure":"","children":["$","code",null,{"data-language":"plaintext","data-theme":"dracula","style":{"backgroundColor":"#282A36","color":"#F8F8F2"},"children":["$","span",null,{"data-line":"","children":["$","span",null,{"children":"podSelector"}]}]}]}]," and ",["$","span",null,{"data-rehype-pretty-code-figure":"","children":["$","code",null,{"data-language":"plaintext","data-theme":"dracula","style":{"backgroundColor":"#282A36","color":"#F8F8F2"},"children":["$","span",null,{"data-line":"","children":["$","span",null,{"children":"namespaceSelector"}]}]}]}]," to allow traffic between pods."]}],"\n",["$","$La",null,{"component":"ul","children":["\n",["$","$Lb",null,{"children":["$","$L3",null,{"children":["If a ",["$","span",null,{"data-rehype-pretty-code-figure":"","children":["$","code",null,{"data-language":"plaintext","data-theme":"dracula","style":{"backgroundColor":"#282A36","color":"#F8F8F2"},"children":["$","span",null,{"data-line":"","children":["$","span",null,{"children":"podSelector"}]}]}]}]," is only present, then the pods within the same namespace the Network Policy is in will be selected."]}]}],"\n",["$","$Lb",null,{"children":["$","$L3",null,{"children":["If a ",["$","span",null,{"data-rehype-pretty-code-figure":"","children":["$","code",null,{"data-language":"plaintext","data-theme":"dracula","style":{"backgroundColor":"#282A36","color":"#F8F8F2"},"children":["$","span",null,{"data-line":"","children":["$","span",null,{"children":"namespaceSelector"}]}]}]}]," is only provided, all the pods within a namespace are selected."]}]}],"\n",["$","$Lb",null,{"children":["$","$L3",null,{"children":["If both ",["$","span",null,{"data-rehype-pretty-code-figure":"","children":["$","code",null,{"data-language":"plaintext","data-theme":"dracula","style":{"backgroundColor":"#282A36","color":"#F8F8F2"},"children":["$","span",null,{"data-line":"","children":["$","span",null,{"children":"podSelector"}]}]}]}]," and ",["$","span",null,{"data-rehype-pretty-code-figure":"","children":["$","code",null,{"data-language":"plaintext","data-theme":"dracula","style":{"backgroundColor":"#282A36","color":"#F8F8F2"},"children":["$","span",null,{"data-line":"","children":["$","span",null,{"children":"namespaceSelector"}]}]}]}]," are provided, all the pods which match the ",["$","span",null,{"data-rehype-pretty-code-figure":"","children":["$","code",null,{"data-language":"plaintext","data-theme":"dracula","style":{"backgroundColor":"#282A36","color":"#F8F8F2"},"children":["$","span",null,{"data-line":"","children":["$","span",null,{"children":"podSelector"}]}]}]}]," within the namespaces that match the ",["$","span",null,{"data-rehype-pretty-code-figure":"","children":["$","code",null,{"data-language":"plaintext","data-theme":"dracula","style":{"backgroundColor":"#282A36","color":"#F8F8F2"},"children":["$","span",null,{"data-line":"","children":["$","span",null,{"children":"namespaceSelector"}]}]}]}]," will be selected."]}]}],"\n"]}],"\n",["$","$L3",null,{"variant":"body1","gutterBottom":true,"sx":{"m":0,"pt":2,"textAlign":"justify"},"children":["I would suggest not using ",["$","span",null,{"data-rehype-pretty-code-figure":"","children":["$","code",null,{"data-language":"plaintext","data-theme":"dracula","style":{"backgroundColor":"#282A36","color":"#F8F8F2"},"children":["$","span",null,{"data-line":"","children":["$","span",null,{"children":"namespaceSelector"}]}]}]}]," alone as it is far too permissive. You can use the other two approaches in allowing your application traffic in a concise manner. Even the traffic that comes from your Ingress Controllers into your application Pods can be limited accordingly in this manner (This is only if the Ingress Controller traffic is routed through a Pod in the Cluster. If not, you can use an IP range based policy as explained in the section below)."]}],"\n",["$","$L3",null,{"variant":"body1","gutterBottom":true,"sx":{"m":0,"pt":2,"textAlign":"justify"},"children":["One important technique that will come in handy in allowing cross-namespace traffic, is using the ",["$","span",null,{"data-rehype-pretty-code-figure":"","children":["$","code",null,{"data-language":"plaintext","data-theme":"dracula","style":{"backgroundColor":"#282A36","color":"#F8F8F2"},"children":["$","span",null,{"data-line":"","children":["$","span",null,{"children":"kubernetes.io/metadata.name"}]}]}]}]," label for selecting a namespace by its name. This label is automatically applied to all namespaces by the Kubernetes API Server automatically."]}],"\n",["$","$L2",null,{"sx":{"pt":8,"pb":3},"children":["$","$L3",null,{"variant":"h4","children":"Allow Traffic to and from Specific IP ranges"}]}],"\n",["$","$L3",null,{"variant":"body1","gutterBottom":true,"sx":{"m":0,"pt":2,"textAlign":"justify"},"children":["After you have secured all the traffic within your Kubernetes Cluster, the next steps are to allow the traffic to and from the internet. This can be done by using ",["$","span",null,{"data-rehype-pretty-code-figure":"","children":["$","code",null,{"data-language":"plaintext","data-theme":"dracula","style":{"backgroundColor":"#282A36","color":"#F8F8F2"},"children":["$","span",null,{"data-line":"","children":["$","span",null,{"children":"ipBlock"}]}]}]}]," based policies."]}],"\n",["$","$L3",null,{"variant":"body1","gutterBottom":true,"sx":{"m":0,"pt":2,"textAlign":"justify"},"children":"For allowing traffic into your applications, you would generally need to allow traffic from your load balancers into the Ingress Controller Pods (or to the Pods themselves depending on how your Ingress Controller works). Once this is done, end users would be able to access your application."}],"\n",["$","$L3",null,{"variant":"body1","gutterBottom":true,"sx":{"m":0,"pt":2,"textAlign":"justify"},"children":"On the other hand, in some cases, your application might need to connect to external services outside your Kubernetes Cluster. In many of those cases, you would know the exact IP ranges that you would be calling."}],"\n",["$","$L3",null,{"variant":"body1","gutterBottom":true,"sx":{"m":0,"pt":2,"textAlign":"justify"},"children":"It would be best to only allow these IP ranges so that in a scenario where your Pods are compromised, the attackers would not be able to use your Pods to launch attacks such as DDoS, on other external systems."}],"\n",["$","$L3",null,{"variant":"body1","gutterBottom":true,"sx":{"m":0,"pt":2,"textAlign":"justify"},"children":["Let’s take a look at the example below where we are only allowing traffic to the CIDR block ",["$","span",null,{"data-rehype-pretty-code-figure":"","children":["$","code",null,{"data-language":"plaintext","data-theme":"dracula","style":{"backgroundColor":"#282A36","color":"#F8F8F2"},"children":["$","span",null,{"data-line":"","children":["$","span",null,{"children":"13.108.14.15/24"}]}]}]}]," on port 80."]}],"\n",["$","figure",null,{"data-rehype-pretty-code-figure":"","children":["$","pre",null,{"style":{"backgroundColor":"#282A36","color":"#F8F8F2"},"tabIndex":"0","data-language":"yaml","data-theme":"dracula","children":["$","code",null,{"data-language":"yaml","data-theme":"dracula","style":{"display":"grid"},"children":[["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#8BE9FD"},"children":"apiVersion"}],["$","span",null,{"style":{"color":"#FF79C6"},"children":":"}],["$","span",null,{"style":{"color":"#F1FA8C"},"children":" networking.k8s.io/v1"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#8BE9FD"},"children":"kind"}],["$","span",null,{"style":{"color":"#FF79C6"},"children":":"}],["$","span",null,{"style":{"color":"#F1FA8C"},"children":" NetworkPolicy"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#8BE9FD"},"children":"metadata"}],["$","span",null,{"style":{"color":"#FF79C6"},"children":":"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#8BE9FD"},"children":"    name"}],["$","span",null,{"style":{"color":"#FF79C6"},"children":":"}],["$","span",null,{"style":{"color":"#F1FA8C"},"children":" allow-ip-range"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#8BE9FD"},"children":"spec"}],["$","span",null,{"style":{"color":"#FF79C6"},"children":":"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#8BE9FD"},"children":"    podSelector"}],["$","span",null,{"style":{"color":"#FF79C6"},"children":":"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#8BE9FD"},"children":"        matchLabels"}],["$","span",null,{"style":{"color":"#FF79C6"},"children":":"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#8BE9FD"},"children":"            app"}],["$","span",null,{"style":{"color":"#FF79C6"},"children":":"}],["$","span",null,{"style":{"color":"#F1FA8C"},"children":" myapp"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#8BE9FD"},"children":"            component"}],["$","span",null,{"style":{"color":"#FF79C6"},"children":":"}],["$","span",null,{"style":{"color":"#F1FA8C"},"children":" backend"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#8BE9FD"},"children":"    policyTypes"}],["$","span",null,{"style":{"color":"#FF79C6"},"children":":"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FF79C6"},"children":"        -"}],["$","span",null,{"style":{"color":"#F1FA8C"},"children":" Egress"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#8BE9FD"},"children":"    egress"}],["$","span",null,{"style":{"color":"#FF79C6"},"children":":"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FF79C6"},"children":"        -"}],["$","span",null,{"style":{"color":"#8BE9FD"},"children":" to"}],["$","span",null,{"style":{"color":"#FF79C6"},"children":":"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FF79C6"},"children":"              -"}],["$","span",null,{"style":{"color":"#8BE9FD"},"children":" ipBlock"}],["$","span",null,{"style":{"color":"#FF79C6"},"children":":"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#8BE9FD"},"children":"                    cidr"}],["$","span",null,{"style":{"color":"#FF79C6"},"children":":"}],["$","span",null,{"style":{"color":"#E9F284"},"children":" \""}],["$","span",null,{"style":{"color":"#F1FA8C"},"children":"13.108.14.15/24"}],["$","span",null,{"style":{"color":"#E9F284"},"children":"\""}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#8BE9FD"},"children":"          ports"}],["$","span",null,{"style":{"color":"#FF79C6"},"children":":"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FF79C6"},"children":"              -"}],["$","span",null,{"style":{"color":"#8BE9FD"},"children":" protocol"}],["$","span",null,{"style":{"color":"#FF79C6"},"children":":"}],["$","span",null,{"style":{"color":"#F1FA8C"},"children":" TCP"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#8BE9FD"},"children":"                port"}],["$","span",null,{"style":{"color":"#FF79C6"},"children":":"}],["$","span",null,{"style":{"color":"#BD93F9"},"children":" 80"}]]}]]}]}]}],"\n",["$","$L3",null,{"variant":"body1","gutterBottom":true,"sx":{"m":0,"pt":2,"textAlign":"justify"},"children":["In some applications, depending on the use cases, it might be harder to use a whitelisting approach (e.g.:- You are deploying a SaaS application providing CI/CD pipeline capabilities, where end users run their custom build scripts). In that case, you can approach this in a different way and block the IP ranges that might pose a threat (e.g.:- ",["$","$L4",null,{"href":"https://learn.microsoft.com/en-us/azure/virtual-machines/instance-metadata-service?tabs=linux","baseUrl":"https://nadundesilva.github.io/blog-articles/","target":"_blank","children":"Azure Instance Metadata Service"}],")."]}],"\n",["$","$L3",null,{"variant":"body1","gutterBottom":true,"sx":{"m":0,"pt":2,"textAlign":"justify"},"children":"Let’s take a look at an example."}],"\n",["$","figure",null,{"data-rehype-pretty-code-figure":"","children":["$","pre",null,{"style":{"backgroundColor":"#282A36","color":"#F8F8F2"},"tabIndex":"0","data-language":"yaml","data-theme":"dracula","children":["$","code",null,{"data-language":"yaml","data-theme":"dracula","style":{"display":"grid"},"children":[["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#8BE9FD"},"children":"apiVersion"}],["$","span",null,{"style":{"color":"#FF79C6"},"children":":"}],["$","span",null,{"style":{"color":"#F1FA8C"},"children":" networking.k8s.io/v1"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#8BE9FD"},"children":"kind"}],["$","span",null,{"style":{"color":"#FF79C6"},"children":":"}],["$","span",null,{"style":{"color":"#F1FA8C"},"children":" NetworkPolicy"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#8BE9FD"},"children":"metadata"}],["$","span",null,{"style":{"color":"#FF79C6"},"children":":"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#8BE9FD"},"children":"    name"}],["$","span",null,{"style":{"color":"#FF79C6"},"children":":"}],["$","span",null,{"style":{"color":"#F1FA8C"},"children":" deny-ip-range"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#8BE9FD"},"children":"spec"}],["$","span",null,{"style":{"color":"#FF79C6"},"children":":"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#8BE9FD"},"children":"    podSelector"}],["$","span",null,{"style":{"color":"#FF79C6"},"children":":"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#8BE9FD"},"children":"        matchLabels"}],["$","span",null,{"style":{"color":"#FF79C6"},"children":":"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#8BE9FD"},"children":"            app"}],["$","span",null,{"style":{"color":"#FF79C6"},"children":":"}],["$","span",null,{"style":{"color":"#F1FA8C"},"children":" myapp"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#8BE9FD"},"children":"            component"}],["$","span",null,{"style":{"color":"#FF79C6"},"children":":"}],["$","span",null,{"style":{"color":"#F1FA8C"},"children":" backend"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#8BE9FD"},"children":"    policyTypes"}],["$","span",null,{"style":{"color":"#FF79C6"},"children":":"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FF79C6"},"children":"        -"}],["$","span",null,{"style":{"color":"#F1FA8C"},"children":" Egress"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#8BE9FD"},"children":"    egress"}],["$","span",null,{"style":{"color":"#FF79C6"},"children":":"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FF79C6"},"children":"        -"}],["$","span",null,{"style":{"color":"#8BE9FD"},"children":" to"}],["$","span",null,{"style":{"color":"#FF79C6"},"children":":"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FF79C6"},"children":"              -"}],["$","span",null,{"style":{"color":"#8BE9FD"},"children":" ipBlock"}],["$","span",null,{"style":{"color":"#FF79C6"},"children":":"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#8BE9FD"},"children":"                    cidr"}],["$","span",null,{"style":{"color":"#FF79C6"},"children":":"}],["$","span",null,{"style":{"color":"#E9F284"},"children":" \""}],["$","span",null,{"style":{"color":"#F1FA8C"},"children":"0.0.0.0/0"}],["$","span",null,{"style":{"color":"#E9F284"},"children":"\""}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#8BE9FD"},"children":"                    except"}],["$","span",null,{"style":{"color":"#FF79C6"},"children":":"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FF79C6"},"children":"                        -"}],["$","span",null,{"style":{"color":"#E9F284"},"children":" \""}],["$","span",null,{"style":{"color":"#F1FA8C"},"children":"169.254.169.254/32"}],["$","span",null,{"style":{"color":"#E9F284"},"children":"\""}]]}]]}]}]}],"\n",["$","$L3",null,{"variant":"body1","gutterBottom":true,"sx":{"m":0,"pt":2,"textAlign":"justify"},"children":["This Network Policy allows you to block a specific address or address range (",["$","span",null,{"data-rehype-pretty-code-figure":"","children":["$","code",null,{"data-language":"plaintext","data-theme":"dracula","style":{"backgroundColor":"#282A36","color":"#F8F8F2"},"children":["$","span",null,{"data-line":"","children":["$","span",null,{"children":"169.254.169.254"}]}]}]}]," IP in this example). In this way, you will be able to limit your external traffic properly as well."]}],"\n",["$","$L3",null,{"variant":"body1","gutterBottom":true,"sx":{"m":0,"pt":2,"textAlign":"justify"},"children":["It would probably be a good idea to include the IP ranges used by the Kubernetes Cluster as well in the ",["$","span",null,{"data-rehype-pretty-code-figure":"","children":["$","code",null,{"data-language":"plaintext","data-theme":"dracula","style":{"backgroundColor":"#282A36","color":"#F8F8F2"},"children":["$","span",null,{"data-line":"","children":["$","span",null,{"children":"except"}]}]}]}]," section above so that you do not accidentally allow access to all Kubernetes Pods with the above approach."]}],"\n",["$","$L7",null,{"sx":{"border":0,"textAlign":"center","pt":"2em","&::before":{"content":"'\\2022\\2800\\2022\\2800\\2022'","fontSize":"2rem","color":"#666"}}}],"\n",["$","$L3",null,{"variant":"body1","gutterBottom":true,"sx":{"m":0,"pt":2,"textAlign":"justify"},"children":"In this manner, using Network Policies, you can draw a very strong Network perimeter around your Kubernetes Pods and your Kubernetes Cluster. If some of the ideas in this article might be too extreme for your deployment, you can try to modify the approaches as it fits."}],"\n",["$","$L3",null,{"variant":"body1","gutterBottom":true,"sx":{"m":0,"pt":2,"textAlign":"justify"},"children":["However, keep in mind that it is always best to reduce the attack surface as much as possible and always ",["$","em",null,{"children":"Think like a Hacker"}]," who is trying to get into your Kubernetes Cluster and exploit it."]}],"\n",["$","$L3",null,{"variant":"body1","gutterBottom":true,"sx":{"m":0,"pt":2,"textAlign":"justify"},"children":"After all, that’s what an actual attacker would be trying to do 🥷."}],"\n",["$","$L8",null,{"container":true,"direction":"column","justifyContent":"center","alignItems":"center","py":3,"children":[["$","$L8",null,{"sx":{"textAlign":"center"},"children":["$","$L9",null,{"src":{"src":"/_next/static/media/hacker-3.e8bcf955.webp","height":2947,"width":3937,"blurDataURL":"data:image/webp;base64,UklGRkAAAABXRUJQVlA4IDQAAADwAQCdASoIAAYAAkA4JZwCdAD0uTJhzAAA/vazv2OJpbW6/eZ7ZCS5sF4VNNKenn6wAAAA","blurWidth":8,"blurHeight":6},"alt":"Hacker","unoptimized":true,"sizes":"100vw","style":{"width":"75%","height":"auto"}}]}],["$","$L8",null,{"children":["$","$L3",null,{"sx":{"fontSize":"0.8em"},"children":["Photo by Clint"," ",["$","$L4",null,{"href":"https://www.pexels.com/@cottonbro/","target":"_blank","children":"cottonbro studio"}]," ","on"," ",["$","$L4",null,{"href":"https://www.pexels.com/photo/woman-using-a-computer-5473302/","target":"_blank","children":"Pexels"}]]}]}]]}],"\n",["$","$L7",null,{"sx":{"border":0,"textAlign":"center","pt":"2em","&::before":{"content":"'\\2022\\2800\\2022\\2800\\2022'","fontSize":"2rem","color":"#666"}}}],"\n",["$","$L3",null,{"variant":"body1","gutterBottom":true,"sx":{"m":0,"pt":2,"textAlign":"justify"},"children":["If you liked this article and would love to learn more about best practices on implementing, deploying, and maintaining applications on Kubernetes, read my article series ",["$","$L4",null,{"href":".","baseUrl":"https://nadundesilva.github.io/blog-articles/","target":"_blank","children":"Kubernetes the Right Way"}],"."]}]]]}],null],null],null]},[null,["$","$Lc",null,{"parallelRouterKey":"children","segmentPath":["children","(content)","children","blog-articles","children","(articles)","children","kubernetes-the-right-way","children","securing-your-production-cluster-with-network-policies","children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$Ld",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined"}]],null]},[null,["$","$Lc",null,{"parallelRouterKey":"children","segmentPath":["children","(content)","children","blog-articles","children","(articles)","children","kubernetes-the-right-way","children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$Ld",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined"}]],null]},[[null,["$","$Lc",null,{"parallelRouterKey":"children","segmentPath":["children","(content)","children","blog-articles","children","(articles)","children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$Ld",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined"}]],null],null]},[null,["$","$Lc",null,{"parallelRouterKey":"children","segmentPath":["children","(content)","children","blog-articles","children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$Ld",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined"}]],null]},[[null,["$","$Le",null,{"maxWidth":false,"sx":{"mb":5,"px":{"xs":0,"lg":20,"xl":40}},"children":[["$","$Lf",null,{}],["$","$Le",null,{"maxWidth":false,"children":["$","$Lc",null,{"parallelRouterKey":"children","segmentPath":["children","(content)","children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$Ld",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":[["$","title",null,{"children":"404: This page could not be found."}],["$","div",null,{"style":{"fontFamily":"system-ui,\"Segoe UI\",Roboto,Helvetica,Arial,sans-serif,\"Apple Color Emoji\",\"Segoe UI Emoji\"","height":"100vh","textAlign":"center","display":"flex","flexDirection":"column","alignItems":"center","justifyContent":"center"},"children":["$","div",null,{"children":[["$","style",null,{"dangerouslySetInnerHTML":{"__html":"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}"}}],["$","h1",null,{"className":"next-error-h1","style":{"display":"inline-block","margin":"0 20px 0 0","padding":"0 23px 0 0","fontSize":24,"fontWeight":500,"verticalAlign":"top","lineHeight":"49px"},"children":"404"}],["$","div",null,{"style":{"display":"inline-block"},"children":["$","h2",null,{"style":{"fontSize":14,"fontWeight":400,"lineHeight":"49px","margin":0},"children":"This page could not be found."}]}]]}]}]],"notFoundStyles":[]}]}]]}]],null],null]},[[[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/0d26d0d6d86ec9db.css","precedence":"next","crossOrigin":"$undefined"}]],["$","html",null,{"lang":"en","children":[["$","head",null,{"children":[["$","meta",null,{"charSet":"UTF-8"}],["$","meta",null,{"httpEquiv":"X-DNS-Prefetch-Control","content":"on"}],["$","meta",null,{"httpEquiv":"Strict-Transport-Security","content":"max-age=63072000; includeSubDomains; preload"}],["$","meta",null,{"httpEquiv":"X-XSS-Protection","content":"1; mode=block"}],["$","meta",null,{"httpEquiv":"Permissions-Policy","content":""}],["$","meta",null,{"httpEquiv":"X-Content-Type-Options","content":"nosniff"}],["$","meta",null,{"httpEquiv":"Content-Security-Policy","content":"default-src 'none'; manifest-src 'self'; img-src 'self' data: https://nadundesilva.imgix.net https://www.google.lk https://www.googletagmanager.com; style-src 'unsafe-inline'; style-src-elem 'self' 'unsafe-inline'; font-src 'self'; script-src 'self' https://www.googletagmanager.com http://www.googletagmanager.com 'unsafe-inline'; worker-src 'self' blob:; child-src 'self' blob:; connect-src 'self' https://www.google-analytics.com https://o4507214991917056.ingest.us.sentry.io"}],["$","link",null,{"rel":"preconnect","href":"https://nadundesilva.imgix.net"}],["$","meta",null,{"property":"fb:app_id","content":"567329184466353"}],["$","meta",null,{"property":"og:fb:profile_id","content":"nadunrds"}],["$","$L10",null,{"async":true,"defer":true,"src":"https://www.googletagmanager.com/gtag/js?id=GTM-T9KX7B4"}],["$","$L10",null,{"id":"google-tag-manager","dangerouslySetInnerHTML":{"__html":"\n                            window.dataLayer = window.dataLayer || [];\n                            function gtag() {\n                                dataLayer.push(arguments);\n                            }\n                            gtag(\"js\", new Date());\n                            gtag(\"config\", \"GTM-T9KX7B4\", {\n                                page_path: window.location.pathname,\n                            });\n                        "}}]]}],["$","body",null,{"children":[["$","noscript",null,{"children":["$","iframe",null,{"src":"https://www.googletagmanager.com/ns.html?id=GTM-T9KX7B4","height":"0","width":"0","style":{"display":"none","visibility":"hidden"}}]}],["$","main",null,{"children":["$","$11",null,{"children":[["$","$L12",null,{}],["$","$L13",null,{"children":["$","$L14",null,{"children":["$","$Lc",null,{"parallelRouterKey":"children","segmentPath":["children"],"error":"$15","errorStyles":[],"errorScripts":[],"template":["$","$Ld",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":[["$","title",null,{"children":"404: This page could not be found."}],["$","div",null,{"style":"$16","children":["$","div",null,{"children":[["$","style",null,{"dangerouslySetInnerHTML":{"__html":"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}"}}],["$","h1",null,{"className":"next-error-h1","style":"$17","children":"404"}],["$","div",null,{"style":"$18","children":["$","h2",null,{"style":"$19","children":"This page could not be found."}]}]]}]}]],"notFoundStyles":[]}]}]}]]}]}]]}]]}]],null],[["$","$L2",null,{"sx":{"display":"flex","justifyContent":"center","pt":"25%","height":"100vh"},"children":["$","$L1a",null,{}]}],[],[]]],["$L1b",null]]]]
1b:[["$","meta","0",{"name":"viewport","content":"width=device-width, initial-scale=1, minimum-scale=1, viewport-fit=cover, user-scalable=yes, interactive-widget=resizes-visual"}],["$","meta","1",{"name":"theme-color","media":"(prefers-color-scheme: light)","content":"#3f51b5"}],["$","meta","2",{"name":"theme-color","media":"(prefers-color-scheme: dark)","content":"#000000"}],["$","meta","3",{"name":"color-scheme","content":"light"}],["$","meta","4",{"charSet":"utf-8"}],["$","title","5",{"children":"Kubernetes the Right Way: Securing Your Production Cluster with Network Policies"}],["$","meta","6",{"name":"description","content":"Kubernetes Network Policies is an important tool at your disposal for improving the Security of your Kubernetes Cluster."}],["$","meta","7",{"name":"application-name","content":"Nadun De Silva"}],["$","link","8",{"rel":"author","href":"https://nadundesilva.github.io"}],["$","meta","9",{"name":"author","content":"Nadun De Silva"}],["$","link","10",{"rel":"manifest","href":"/manifest.webmanifest","crossOrigin":"use-credentials"}],["$","meta","11",{"name":"generator","content":"Next.js"}],["$","meta","12",{"name":"keywords","content":"Nadun,Rusiru,De Silva,Nadun De Silva,Nadun Rusiru De Silva,Kurukulasuriya Patabandige Nadun Rusiru De Silva,Software Engineer"}],["$","meta","13",{"name":"referrer","content":"origin"}],["$","meta","14",{"name":"creator","content":"Nadun De Silva"}],["$","meta","15",{"name":"publisher","content":"Nadun De Silva"}],["$","meta","16",{"name":"robots","content":"https://nadundesilva.github.io/robots.txt"}],["$","link","17",{"rel":"canonical","href":"https://nadundesilva.github.io"}],["$","meta","18",{"name":"format-detection","content":"telephone=no, date=no, address=no, email=no, url=no"}],["$","meta","19",{"name":"google-site-verification","content":"M8dg6gzVYU0noXFvsPOqknm_WjREFeNE212YeUk0g30"}],["$","meta","20",{"name":"yandex-verification","content":"acbc45e5d9645cf0"}],["$","meta","21",{"name":"apple-mobile-web-app-capable","content":"yes"}],["$","link","22",{"href":"https://nadundesilva.github.io/assets/profile-photo.jpg","media":"image/jpeg","rel":"apple-touch-startup-image"}],["$","meta","23",{"name":"apple-mobile-web-app-status-bar-style","content":"black-translucent"}],["$","link","24",{"rel":"shortcut icon","href":"https://nadundesilva.github.io/icon-maskable-x512.png"}],["$","link","25",{"rel":"icon","href":"/favicon.ico","type":"image/x-icon","sizes":"256x256"}],["$","link","26",{"rel":"icon","href":"https://nadundesilva.github.io/icon-maskable-x512.png"}],["$","link","27",{"rel":"apple-touch-icon","href":"https://nadundesilva.github.io/assets/profile-photo.jpg"}],["$","meta","28",{"name":"next-size-adjust"}]]
1:null
